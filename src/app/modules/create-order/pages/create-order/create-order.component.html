<app-page-banner [bannerTitle]="bannerTitle"></app-page-banner>
<!-- OPTIONS PANEL -->
<div fxLayout="row" class="marginSmall">
    <!-- MENU -->
    <div fxLayout="column" class="paddingLeftXtraSmall">        
        <button mat-mini-fab matTooltip="Inicio" matTooltipPosition="above" routerLink="/dashboard" style="color:#002856">
            <mat-icon>home</mat-icon>
          </button>
    </div>    
    <!-- CREATE ORDER -->
    <div fxLayout="column" class="paddingLeftXtraSmall">
        <button mat-mini-fab color="primary" matTooltip="Crear orden" matTooltipPosition="above" routerLink="/create/newOrder">
            <mat-icon>receipt</mat-icon>
         </button>
    </div>    
</div>

<!-- MAIN PANEL -->
<mat-card class="marginSmall paddingMedium" style="min-width: 400px !important;">
    <mat-card-content>
        <form [formGroup]="addOrderForm" >
            <div fxLayout="column">
                <fieldset>
                    <legend>Datos del cliente:</legend>
                    <!-- ROW -->
                    <div fxLayout.gt-md="row" fxLayout="column" class="paddingXtraSmall">
                        <!-- NOMBRE: -->
                        <div fxLayoutAlign="center center" fxFlex>
                            <mat-form-field class="inputFullWidth">
                                <mat-label>Nombre:</mat-label>
                                <input matInput formControlName="clientName">
                                <mat-error *ngIf="(addOrderForm.get('clientName')?.dirty || addOrderForm.get('clientName')?.touched) || addOrderForm.get('clientName')?.errors">Nombre de usuario no es válido</mat-error>
                            </mat-form-field>
                        </div>
                        <!-- APELLIDO PATERNO: -->
                        <div fxLayoutAlign="center center" fxFlex>
                            <mat-form-field class="inputFullWidth">
                                <mat-label>Primer apellido:</mat-label>
                                <input matInput formControlName="apPaterno">
                                <mat-error *ngIf="(addOrderForm.get('apPaterno')?.dirty || addOrderForm.get('apPaterno')?.touched) || addOrderForm.get('apPaterno')?.errors">Apellido paterno no es válido</mat-error>
                            </mat-form-field>
                        </div>
                        <!-- APELLIDO MATERNO: -->
                        <div fxLayoutAlign="center center" fxFlex>
                            <mat-form-field class="inputFullWidth">
                                <mat-label>Segundo apellido:</mat-label>
                                <input matInput formControlName="apMaterno">
                                <mat-error *ngIf="(addOrderForm.get('apMaterno')?.dirty || addOrderForm.get('apMaterno')?.touched) || addOrderForm.get('apMaterno')?.errors">Apellido materno no es válido</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- ROW -->
                    <div fxLayout.gt-md="row" fxLayout="column" class="paddingXtraSmall">
                        <!-- CURP: -->
                        <div fxLayoutAlign="center center" fxFlex>
                            <mat-form-field class="inputFullWidth">
                                <mat-label>CURP:</mat-label>
                                <input matInput formControlName="curp">
                                <mat-error *ngIf="(addOrderForm.get('curp')?.dirty || addOrderForm.get('curp')?.touched) || addOrderForm.get('curp')?.errors">CURP no es válido</mat-error>
                            </mat-form-field>
                        </div>
                        <!-- RFC: -->
                        <div fxLayoutAlign="center center" fxFlex>
                            <mat-form-field class="inputFullWidth">
                                <mat-label>RFC (con homoclave):</mat-label>
                                <input matInput formControlName="rfc">
                                <mat-error *ngIf="(addOrderForm.get('rfc')?.dirty || addOrderForm.get('rfc')?.touched) || addOrderForm.get('rfc')?.errors">RFC no es válido</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Dirección:</legend>
                    <!-- ROW -->
                    <div fxLayout.gt-md="row" fxLayout="column" class="paddingXtraSmall">
                        <!-- C.P: -->
                        <div fxLayoutAlign="center center" fxFlex="15">
                            <mat-form-field class="inputFullWidth">
                                <mat-label>Código postal:</mat-label>
                                <input matInput formControlName="codigoPostal">
                                <mat-error *ngIf="(addOrderForm.get('codigoPostal')?.dirty || addOrderForm.get('codigoPostal')?.touched) || addOrderForm.get('codigoPostal')?.errors">Código postal no es válido</mat-error>
                            </mat-form-field>
                        </div>
                        <!-- CALLE: -->
                        <div fxLayoutAlign="center center" fxFlex>
                            <mat-form-field class="inputFullWidth">
                                <mat-label>Calle:</mat-label>
                                <input matInput formControlName="calle">
                                <mat-error *ngIf="(addOrderForm.get('calle')?.dirty || addOrderForm.get('calle')?.touched) || addOrderForm.get('calle')?.errors">Este campo es requerido</mat-error>
                            </mat-form-field>
                        </div>                        
                    </div>                     
                    <!-- ROW -->
                    <div fxLayout.gt-md="row" fxLayout="column" class="paddingXtraSmall">
                         <!-- NUMERO EXTERIOR: -->
                         <div fxLayoutAlign="center center" fxFlex="25">
                            <mat-form-field class="inputFullWidth">
                                <mat-label>Número exterior:</mat-label>
                                <input matInput formControlName="numExt">
                                <mat-error *ngIf="(addOrderForm.get('numExt')?.dirty || addOrderForm.get('numExt')?.touched) || addOrderForm.get('numExt')?.errors">Número exterior no es válido</mat-error>
                            </mat-form-field>
                        </div>
                        <!-- NUMERO INTERIOR: -->
                        <div fxLayoutAlign="center center" fxFlex="25">
                            <mat-form-field class="inputFullWidth">
                                <mat-label>Número interior:</mat-label>
                                <input matInput formControlName="numInt">
                                <mat-error *ngIf="(addOrderForm.get('numInt')?.dirty || addOrderForm.get('numInt')?.touched) || addOrderForm.get('numInt')?.errors">Número interior no es válido</mat-error>
                            </mat-form-field>
                        </div> 
                        <!-- ESTADO: -->
                        <div fxLayoutAlign="center center" fxFlex>
                            <mat-form-field class="inputFullWidth">
                                <mat-label>Estado:</mat-label>
                                <input matInput formControlName="estado">
                                <mat-error *ngIf="(addOrderForm.get('estado')?.dirty || addOrderForm.get('estado')?.touched) || addOrderForm.get('estado')?.errors">Estado no es válido</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- ROW -->
                    <div fxLayout.gt-md="row" fxLayout="column" class="paddingXtraSmall">
                         <!-- DELEGACION/MUNICIPIO -->
                         <div fxLayoutAlign="center center" fxFlex>
                            <mat-form-field class="inputFullWidth">
                                <mat-label>Delegación / Municipio:</mat-label>
                                <input matInput formControlName="municipio">
                                <mat-error *ngIf="(addOrderForm.get('municipio')?.dirty || addOrderForm.get('municipio')?.touched) || addOrderForm.get('municipio')?.errors">Municipio  no es válido</mat-error>
                            </mat-form-field>
                        </div>
                        <!-- COLONIA: -->
                        <div fxLayoutAlign="center center" fxFlex>
                            <mat-form-field class="inputFullWidth">
                                <mat-label>Colonia:</mat-label>
                                <input matInput formControlName="colonia">
                                <mat-error *ngIf="(addOrderForm.get('colonia')?.dirty || addOrderForm.get('colonia')?.touched) || addOrderForm.get('colonia')?.errors">Municipio  no es válido</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </fieldset>                               
            </div>
            <mat-card-actions align="end" class="marginXtraSmall">                            
                <button mat-raised-button color="primary" (click)="saveUser()" class="marginXtraSmall">
                    <mat-icon>save</mat-icon>
                    Guardar</button>
            </mat-card-actions>   
        </form>         
    </mat-card-content>      
</mat-card>

<!-- DATA GRID -->
<mat-card class="marginSmall paddingMedium" style="min-width: 400px !important;">
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

  <!-- ID COLUMN-->
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      ID
    </th>
    <td mat-cell *matCellDef="let element"> {{element.id}} </td>
  </ng-container>

  <!-- NAME COLUMN -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      Name
    </th>
    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
  </ng-container>

  <!-- EMAIL COLUMN -->
  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      Email
    </th>
    <td mat-cell *matCellDef="let element"> {{element.email}} </td>
  </ng-container>

  <!-- WEBSITE COLUMN -->
  <ng-container matColumnDef="website">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      Website
    </th>
    <td mat-cell *matCellDef="let element"> {{element.website}} </td>
  </ng-container>
  
  <!-- ACTIONS -->
  <ng-container matColumnDef="action">
    <th mat-header-cell *matHeaderCellDef>
      Action
    </th>
    <td mat-cell *matCellDef="let element" style="min-width: 180px !important;">
        <button mat-icon-button color="warn">
            <mat-icon>delete</mat-icon>
        </button>
        <button mat-icon-button>
            <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="primary">
            <mat-icon>map</mat-icon>          
        </button>
    <td>        
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
</mat-card>

